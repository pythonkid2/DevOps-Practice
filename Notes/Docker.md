# Docker Notes

## Introduction to Docker

Docker is an open platform for developing, shipping, and running applications. It enables you to separate your applications from your infrastructure, delivering software quickly.

## Docker Architecture

Docker uses a client-server architecture. The main components are:

1. Docker Client: The primary way to interact with Docker.
2. Docker Host: The machine running the Docker daemon.
3. Docker Registry: Stores Docker images.

## Basic Docker Commands

- `docker run`: Run a command in a new container.
- `docker build`: Build an image from a Dockerfile.
- `docker pull`: Pull an image from a registry.
- `docker push`: Push an image to a registry.
- `docker images`: List all images.
- `docker ps`: List all containers.
- `docker exec`: Run a command in a running container.
- `docker stop`: Stop one or more running containers.

## Dockerfile

A Dockerfile is a script that contains a collection of commands and instructions that define how to build an image. Example of a Dockerfile:

```Dockerfile
FROM ubuntu:latest
RUN apt-get update -y
RUN apt-get install -y python3
CMD ["python3", "-m", "http.server", "8080"]

## Docker Compose

Docker Compose is a tool for defining and running multi-container Docker applications. It uses a YAML file to configure services. Example of a `docker-compose.yml` file:

```yaml
version: "3.9"
services:
  web:
    build: .
    ports:
      - "5000:5000"
  redis:
    image: "redis:alpine"

## Docker Networking

Docker networking allows communication between Docker containers as well as communication between Docker containers and the outside world.

- `docker network create`: Create a new network.
- `docker network connect`: Connect a container to a network.
- `docker network inspect`: Display detailed information on one or more networks.

## Docker Volumes

Docker volumes are a way to persist data generated by and used by Docker containers. They are stored outside the container, enabling data to persist even when the container is removed.

- `docker volume create`: Create a volume.
- `docker volume ls`: List volumes.
- `docker volume rm`: Remove one or more volumes.

## Docker Best Practices

- Use small base images.
- Leverage multi-stage builds.
- Minimize the number of layers.
- Use a `.dockerignore` file to exclude files and directories from the context.

## Docker Security

- Always use trusted images from official repositories or reputable sources.
- Avoid running containers as a privileged user.
- Use security best practices while configuring Docker.



1, Create a new network named wp-mysql-network using the bridge driver. Allocate subnet 182.18.0.1/24. Configure Gateway 182.18.0.1

- docker network create --driver bridge --subnet 182.18.0.1/24 --gateway 182.18.0.1 wp-mysql-network

- Inspect the created network by docker network inspect wp-mysql-network


## Docker Commnads

1. **Building and Managing Images:**
   - **Build an image from a Dockerfile:**
     ```bash
     docker build -t image_name:tag path/to/Dockerfile
     ```
   - **List available images:**
     ```bash
     docker images
     ```
   - **Remove an image:**
     ```bash
     docker rmi image_name:tag
     ```

2. **Running Containers:**
   - **Run a container from an image:**
     ```bash
     docker run -d -p host_port:container_port --name container_name image_name:tag
     ```
   - **List running containers:**
     ```bash
     docker ps
     ```
   - **Stop a running container:**
     ```bash
     docker stop container_name_or_id
     ```
   - **Remove a container:**
     ```bash
     docker rm container_name_or_id
     ```

3. **Viewing Container Logs:**
   - **View logs of a running container:**
     ```bash
     docker logs container_name_or_id
     ```

4. **Managing Volumes:**
   - **Create a named volume:**
     ```bash
     docker volume create volume_name
     ```
   - **List volumes:**
     ```bash
     docker volume ls
     ```
   - **Remove a volume:**
     ```bash
     docker volume rm volume_name
     ```

5. **Inspecting Containers:**
   - **Inspect details of a container:**
     ```bash
     docker inspect container_name_or_id
     ```

6. **Executing Commands Inside Containers:**
   - **Run a command in a running container:**
     ```bash
     docker exec -it container_name_or_id command
     ```

7. **Network Management:**
   - **List networks:**
     ```bash
     docker network ls
     ```
   - **Inspect a network:**
     ```bash
     docker network inspect network_name
     ```

8. **Cleaning Up:**
   - **Remove all stopped containers:**
     ```bash
     docker container prune
     ```
   - **Remove all unused images:**
     ```bash
     docker image prune
     ```

9. **Docker Compose:**
   - **Start containers defined in a Compose file:**
     ```bash
     docker-compose up -d
     ```
   - **Stop and remove containers defined in a Compose file:**
     ```bash
     docker-compose down
     ```

10. **Docker Swarm (if relevant):**
    - **Initialize a Docker Swarm:**
      ```bash
      docker swarm init
      ```
    - **Deploy a stack to a Docker Swarm:**
      ```bash
      docker stack deploy -c docker-compose.yml stack_name
      ```
